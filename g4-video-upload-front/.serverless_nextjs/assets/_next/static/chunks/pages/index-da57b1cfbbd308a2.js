(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4186)}])},4186:function(e,n,t){"use strict";t.r(n);var r=t(4051),o=t.n(r),i=t(5893),a=t(8790),s=t(9762),c=t(4612),u=t(5113),l=t(336),d=t(8152),f=t(9669),v=t.n(f),h=t(1163),p=t(7294);function m(e,n,t,r,o,i,a){try{var s=e[i](a),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,o)}var x=function(){var e=(0,h.useRouter)().reload,n=(0,p.useState)(""),t=n[0],r=n[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.X6,{size:"md",children:"Adicione um email para enviar o video"}),(0,i.jsxs)(a.kC,{as:"form",onSubmit:function(n){n.preventDefault(),localStorage.setItem("email",t),e()},children:[(0,i.jsx)(s.NI,{children:(0,i.jsx)(c.II,{value:t,onChange:function(e){return r(e.target.value)}})}),(0,i.jsx)(u.zx,{type:"submit",children:"Entrar"})]})]})},j=function(e){var n=e.email,t=(0,l.pm)(),r=(0,h.useRouter)().reload,a=(0,p.useState)(0),s=a[0],f=a[1],x=function(){var e,r=(e=o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(0),v().get("https://e1mvw8dhtk.execute-api.us-east-1.amazonaws.com/dev/getS3PresignedUrl?email=".concat(n)).then((function(e){var n,o=e.data.url,i={headers:{"content-type":"video/mp4"},onUploadProgress:function(e){f(Math.round(100*e.loaded/e.total))}};v().put(o,null===r||void 0===r||null===(n=r.target)||void 0===n?void 0:n.files[0],i).then((function(){t({title:"Video enviado!",description:"Voc\xea receber\xe1 o link por email em breve",status:"success",isClosable:!0,duration:5e3})})).catch((function(e){f(0),t({title:"Error!",description:"Erro inesperado",status:"error",isClosable:!0,duration:5e3})}))})).catch((function(e){f(0),t({title:"Error!",description:"Erro inesperado",status:"error",isClosable:!0,duration:5e3})}));case 2:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){m(i,r,o,a,s,"next",e)}function s(e){m(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.II,{type:"file",placeholder:"Selecione o v\xeddeo",accept:"video/mp4",onChange:x}),(0,i.jsx)(u.zx,{onClick:function(){localStorage.setItem("email",""),r()},children:"Sair"}),s>0&&(0,i.jsx)(d.Ex,{value:s})]})};n.default=function(){var e=(0,p.useState)(),n=e[0],t=e[1];return(0,p.useEffect)((function(){var e=localStorage.getItem("email");e&&t(e)}),[]),(0,i.jsxs)(a.kC,{justify:"center",align:"center",direction:"column",w:"full",h:"screen",children:[(0,i.jsx)(a.X6,{size:"lg",children:"Upload de Videos"}),(0,i.jsxs)(a.kC,{w:500,direction:"column",justify:"space-evenly",shadow:"md",children:[!n&&(0,i.jsx)(x,{}),n&&(0,i.jsx)(j,{email:n})]})]})}}},function(e){e.O(0,[541,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);